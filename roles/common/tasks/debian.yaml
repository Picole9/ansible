- name: Apt upgrade
  tags: update
  become: true
  ansible.builtin.apt:
    update_cache: true
    upgrade: true

- name: Install packages
  tags: install
  become: true
  ansible.builtin.apt:
    update_cache: true
    name:
      - bat # cat
      - btop # htop
      - curl
      - fd-find # find
      - fzf
      - git
      - gnupg
      - jq
      # - lazygit
      - python3-pip
      - python3-venv
      - ripgrep # grep
      - software-properties-common
      - zoxide
- name: Install eza # ls
  tags: install
  block:
    - name: Check for eza
      ansible.builtin.command: apt-cache policy eza
      register: eza_exists
      changed_when: false
      failed_when: false
    - name: Install eza
      become: true
      ansible.builtin.apt:
        name: eza
      when: "'Candidate' in eza_exists.stdout"
    - name: Install exa if eza does not exist
      become: true
      ansible.builtin.apt:
        name: exa
      when: "'Candidate' not in eza_exists.stdout"
